
{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <title>index</title>

  <!-- Favicons -->
  <link href="{%static 'img/favicon.png' %}" rel="icon">
  <link href="{%static 'img/apple-touch-icon.png' %}" rel="apple-touch-icon">

  <!-- Bootstrap core CSS -->
  <link href="{%static 'lib/bootstrap/css/bootstrap.min.css' %} " rel="stylesheet">
  <link href=" {%static 'lib/font-awesome/css/font-awesome.css' %}" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="{%static 'css/zabuto_calendar.css' %} ">
  <link rel="stylesheet" type="text/css" href="{%static 'lib/gritter/css/jquery.gritter.css' %} " />
  <link href="{%static 'css/style.css' %}" rel="stylesheet">
  <link href="{%static 'css/style-responsive.css' %} " rel="stylesheet">
  <script src="{%static 'lib/chart-master/Chart.js' %} "></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <section id="container">
    <header class="header black-bg">
      <div class="sidebar-toggle-box">
        <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
      </div>
      <!--logo start-->
      <a href="{% url 'home' %}" class="logo"><b>BY<span>IOD</span></b></a>
      <div class="top-menu">
        <ul class="nav pull-right top-menu">
          <li><a class="logout" href="/logout/">Logout</a></li>
        </ul>
      </div>
    </header>
    <!--header end-->
  
    <!--sidebar start-->
    <aside>
      <div id="sidebar" class="nav-collapse ">
        <!-- sidebar menu start-->
        <ul class="sidebar-menu" id="nav-accordion">
          <li class="mt">
            <a class="active" href="{% url 'home' %}">
              <i class="fa fa-dashboard"></i>
              <span>Dashboard</span>
              </a>
          </li>

          <li class="sub-menu">
            <a href="javascript:;">
              <i class="fa fa-tasks"></i>
              <span>DEVICES</span>
              </a>
            <ul class="sub">
              <li><a href="{% url 'device' %}">Device list</a></li>
              <li><a href="{% url 'user_device' %}">User's device</a></li>
            </ul>
          </li>
          <li class="sub-menu">
            <a href="javascript:;">
              <i class="fa fa-users"></i>
              <span>USERS</span>
              </a>
            <ul class="sub">
              <li><a href="{% url 'users' %}">users list</a></li>
            </ul>
          </li>
            <li class="sub-menu">
            <a href="javascript:;">
              <i class="fas fa-network-wired"></i>
              <span>NETWORK</span>
              </a>
            <ul class="sub">
              <li><a href="{% url 'scan' %}">scan</a></li>
              <li><a href="{% url 'network' %}">network traffic</a></li>
            </ul>
          </li>
        </ul>
        <!-- sidebar menu end-->
      </div>
    </aside>
    <!--sidebar end-->
    <!--main content start-->
    <section id="main-content">
      <section class="wrapper">
        <div class="row">
          <div class="col-lg-9 main-chart" style="margin-top:3%;">
            <!--CUSTOM CHART START -->
            <div class="border-head">
              <h3>DEVICES INTERFACES...</h3>
            </div>
              <canvas id="graph"></canvas>
            <!--custom chart end-->
            <div class="row mt">
              <!-- SERVER STATUS PANELS -->
              <div class="col-md-4 col-sm-4 mb">
                <div class="grey-panel pn donut-chart">
                  <div class="grey-header">
                    <h5>SERVER LOAD</h5>
                  </div>
                  <canvas id="serverstatus01" height="120" width="120"></canvas>
                  <script>
                    var doughnutData = [{
                        value: 70,
                        color: "#FF6B6B"
                      },
                      {
                        value: 30,
                        color: "#fdfdfd"
                      }
                    ];
                    var myDoughnut = new Chart(document.getElementById("serverstatus01").getContext("2d")).Doughnut(doughnutData);
                  </script>
                  <div class="row">
                   
                  
                  </div>
                </div>
                <!-- /grey-panel -->
              </div>
              <!-- /col-md-4-->
              <div class="col-md-4 col-sm-4 mb">
                <div class="darkblue-panel pn">
                  <div class="darkblue-header">
                    <h5>DEVICES STATICS USES </h5>
                  </div>
                  <canvas id="device" height="500" width="120"></canvas>

                  <script>
                  
                  const graph_ = document.getElementById('device').getContext("2d")
                  var data1 = {
                    labels: ["computer", "smartphone"],
                    datasets: [
                      {
                        label: "Devices",
                        data: [10, 50],
                        backgroundColor: [
                          "#DEB887",
                          "#A9A9A9",
                          "#DC143C",
                          "#F4A460",
                          "#2E8B57"
                        ],
                        borderColor: [
                          "#CDA776",
                          "#989898",
                          "#CB252B",
                          "#E39371",
                          "#1D7A46"
                        ],
                        borderWidth: [1, 1]
                      }
                    ]
                  };
                  var options = {
                      responsive: true,
                      title: {
                        display: true,
                        position: "top",
                        text: "Doughnut Chart",
                        fontSize: 12,
                        fontColor: "#111"
                      },
                      legend: {
                        display: true,
                        position: "bottom",
                        labels: {
                          fontColor: "#333",
                          fontSize: 12
                        }
                      }
                    };

                  var chart1 = new Chart(graph_ , {
                    type: "doughnut",
                    data: data1,
                    options: options
                });

                var

                  //  var myDoughnut = new Chart(document.getElementById("device").getContext("2d")).Doughnut(doughnutData);
                  </script>
                  {% comment %} <p id="date"></p> {% endcomment %}
                  <footer>
                    <div class="pull-left">
                      {% comment %} <h5><i class="fa fa-hdd-o"></i> 17 GB</h5> {% endcomment %}
                    </div>
                    <div class="pull-right">
                      {% comment %} <h5>60% Used</h5> {% endcomment %}
                    </div>
                  </footer>
                </div>
                <!--  /darkblue panel -->
              </div>
              <!-- /col-md-4 -->
          
            </div>
          </div>
            <div class="col-lg-3 ds">
            <!--COMPLETED ACTIONS DONUTS CHART-->
            <div class="donut-main">
              <h4>COMPLETED ACTIONS & PROGRESS</h4>
              {% comment %} <canvas id="newchart" height="130" width="130"></canvas> {% endcomment %}
              <p id="date">
              </p>
              <script>
                var doughnutData = [{
                    value: 70,
                    color: "#4ECDC4"
                  },
                  {
                    value: 30,
                    color: "#fdfdfd"
                  }
                ];
                var myDoughnut = new Chart(document.getElementById("newchart").getContext("2d")).Doughnut(doughnutData);
              </script>
            </div>
            <!--NEW EARNING STATS -->
           
            <!--new earning end-->
            <!-- RECENT ACTIVITIES SECTION -->
            <h4 class="centered mt">NETWORK MANAGER</h4>
            <!-- First Activity -->
            <div class="desc">
              <div class="thumb">
                <span class="badge bg-theme"><i class="fa fa-clock-o"></i></span>
              </div>
              <div class="details">
                <p>
                  <muted>Just Now</muted>
                  <br/>
                  <a href="#">System administrator.<br/>
                </p>
              </div>
            </div>
        </div>
      </section>
    </section>
   
  
    <!--footer end-->
  </section>
  <!-- js placed at the end of the document so the pages load faster -->
  <script src="{%static 'lib/jquery/jquery.min.js' %} "></script>

  <script src="{%static 'lib/bootstrap/js/bootstrap.min.js' %} "></script>
  <script class="include" type="text/javascript" src="{%static 'lib/jquery.dcjqaccordion.2.7.js' %} "></script>
  <script src="{%static 'lib/jquery.scrollTo.min.js' %} "></script>
  <script src="{%static 'lib/jquery.nicescroll.js' %} " type="text/javascript"></script>
  <script src="{%static 'lib/jquery.sparkline.js' %} "></script>
  <!--common script for all pages-->
  <script src="{%static 'lib/common-scripts.js' %} "></script>
  <script type="text/javascript" src="{%static 'lib/gritter/js/jquery.gritter.js' %} "></script>
  <script type="text/javascript" src="{%static 'lib/gritter-conf.js' %} "></script>
  <!--script for this page-->
  <script src="{%static 'lib/sparkline-chart.js' %}"></script>
  <script src="{%static 'lib/zabuto_calendar.js' %} "></script>

  <script type="application/javascript">
    $(document).ready(function() {
      $("#date-popover").popover({
        html: true,
        trigger: "manual"
      });
      $("#date-popover").hide();
      $("#date-popover").click(function(e) {
        $(this).hide();
      });

      $("#my-calendar").zabuto_calendar({
        action: function() {
          return myDateFunction(this.id, false);
        },
        action_nav: function() {
          return myNavFunction(this.id);
        },
        ajax: {
          url: "show_data.php?action=1",
          modal: true
        },
        legend: [{
            type: "text",
            label: "Special event",
            badge: "00"
          },
          {
            type: "block",
            label: "Regular event",
          }
        ]
      });
    });

    function myNavFunction(id) {
      $("#date-popover").hide();
    }

      function date(){
        var d = new Date()
        var date = d.getFullYear()+'-'+(d.getMonth()+1)+'-'+d.getDate();
        return date
      }

      var value_date = date().toLocalDateString("en-US")
      var dash_date = document.getElementById('date')
      dash_date.innerHTML = value_date

   // let data = JSON.parse("{{users |escapejs}}");
    let  users_name = JSON.parse("{{users_name | escapejs}}");
    let  device_number = JSON.parse("{{device_number | escapejs}}");

    const graph = document.getElementById('graph').getContext("2d")
  
    let myChart = new Chart(graph, {
      type: 'bar',
      data:{
        labels:users_name,
        datasets: [
          {
            label: 'Device per user',
            data:device_number,
          },
        ],
      borderWidth: 1
      },
    })
     
  </script>
</body>

</html>
